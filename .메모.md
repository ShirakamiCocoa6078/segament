현재 Best 30 및 New 20에 있는 각 악곡들의 정보(곡명, 레벨, 자켓, 상수, 레이팅, 스코어, 난이도, 순위), 유저명, 유저 레이팅, 유저 레벨, 플레이카운트, Best30 및 New20의 평균 레이팅을 포함하는 레이팅표 이미지 생성 기능(html to img 기술 사용)을 만들려고함.
우선적으로, react 컴포넌트를 생성할것
이미지로 변환될 HTML 구조를 담당하는 전용 리액트 컴포넌트를 생성함
컴포넌트명은 다음과 같음
MakeRatingImg.tsx
Html to img 변환 기술로써는, @vercel/og 라이브러리를 사용할것을 권장함
API 엔드포인트는 다음과 같이 구현할것
src/app/api/v1/img/MakeRatingImg/route.ts
API 로직은 다음과 같음
요청을 보낸 사용자를 인증하고, 세션을 확인(확인가능한경우)
데이터베이스에서 필요한 프로필 정보 및 플레이 기록, 각 곡 ID와 자켓 이미지들을 조회
각 악곡의 레이팅 정보 및 best 30 new 20의 평균 레이팅 정보를 기존 detail페이지와 동일하게 계산하여 참조
계산된, 수집된 데이터를 MakeRatingImg.tsx 컴포넌트에 props로 전달
@vercel/og라이브러리를 이용하여 렌더링된 컴포넌트를 PNG이미지로 변환
생성된 이미지를 HTTP 응답으로 반환

또한, dashboard/detail~페이지에서, Best30 및 New20 우측 상단, 최대, 최소, 평균 레이팅을 표시하는 자리 바로 위에, "레이팅표 생성" 버튼을 추가.
해당 버튼을 누르면, 백그라운드를 어둡게 처리하고 화면 중앙에 팝업란을 생성. 위 API에 요청을 보냄, 생성되는 동안 팝업창에는 로딩중을 알리는 스피너 UI를 표시
이미지의 생성이 완료되면, 스피너 UI를 제거하고 반환받은 이미지를 팝업창에 표시
팝업창에는 다운로드 버튼을 놔두고, 다운로드 버튼을 눌렀을 경우 반환받은 이미지를 자동으로 다운로드하도록 설정
다운로드하는 이미지명은 다음과같음 [닉네임]_[몇년몇월며칠몇시몇분몇초]
예시)testNickname_20250905085316.png
오류 발생시 팝업창에 사용자에게 재시도를 요청하는 오류 알림을 표시

다음은, 각 요소의 배치의 지시임
배경이미지를 제외한 각 악곡 및 디자인은 Tailwind CSS를 이용하여 스타일링할것
일시적으로, 배경이미지를 준비하기 이전까지 회색 배경을 사용할것
기본적으로, 가운데 정렬로 요소들을 배치함
최 상단에는, 고정 텍스트로써 다음 정보가 표시됨

CHUNITHM 베스트・뉴 레이팅 표
segamentImgGenerater

다음행에서는,  우측에 다음 정보를 포함함

생성일 : YYYY/MM/DD HH:MM:SS

다음 두 행에서는, 가운데 정렬로 좌, 우에 다음 정보를 포함함

플레이어닉네임        RATING : [실제 레이팅]
[실제플레이어닉네임]    BEST[베스트평균레이팅] NEW[뉴평균레이팅]

이 아래에는, 각 악곡의 정보를 표시
Best30
악곡은 한 열당 5곡씩, 6줄을 사용
각 곡은 다음과 같이 표시됨
